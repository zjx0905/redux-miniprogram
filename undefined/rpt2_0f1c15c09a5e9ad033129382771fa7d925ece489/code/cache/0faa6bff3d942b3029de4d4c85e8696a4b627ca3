{"code":"class CommitClass {\r\n    constructor(task = 'sync') {\r\n        this.task = task;\r\n        this.state = false;\r\n    }\r\n    getState() {\r\n        return this.state;\r\n    }\r\n    setState(state) {\r\n        this.state = state;\r\n    }\r\n    run(handler) {\r\n        if (this.getState() === true) {\r\n            return;\r\n        }\r\n        this.setState(true);\r\n        const execute = () => {\r\n            handler();\r\n            this.setState(false);\r\n        };\r\n        if (this.task === 'sync') {\r\n            return execute();\r\n        }\r\n        return Promise.resolve().then(execute);\r\n    }\r\n}\r\nexport default function createCommit(task) {\r\n    return new CommitClass(task);\r\n}\r\n//# sourceMappingURL=createCommit.js.map","references":["/Users/fluff/Documents/zjx0905/redux-miniprogram/src/types.ts"],"map":"{\"version\":3,\"file\":\"createCommit.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/connect/createCommit.ts\"],\"names\":[],\"mappings\":\"AAEA,MAAM,WAAW;IAKf,YAAY,OAAyB,MAAM;QACzC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,QAAQ,CAAC,KAAc;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,GAAG,CAAC,OAAmB;QACrB,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,EAAE;YAC5B,OAAO;SACR;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEpB,MAAM,OAAO,GAAG,GAAG,EAAE;YACnB,OAAO,EAAE,CAAC;YAEV,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CAAC;QAEF,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;YACxB,OAAO,OAAO,EAAE,CAAC;SAClB;QAED,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACzC,CAAC;CACF;AAED,MAAM,CAAC,OAAO,UAAU,YAAY,CAAC,IAAuB;IAC1D,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;AAC/B,CAAC\"}","dts":{"name":"/Users/fluff/Documents/zjx0905/redux-miniprogram/types/connect/createCommit.d.ts","writeByteOrderMark":false,"text":"import { Commit } from '../types';\r\nexport default function createCommit(task?: 'sync' | 'async'): Commit;\r\n"}}
