{"code":"import { useStore, useState } from '../api/hooks';\r\nimport createCommit from './createCommit';\r\nconst commit = createCommit('async');\r\nconst listeners = [];\r\nlet subscribed = false;\r\nfunction updating() {\r\n    commit.run(() => {\r\n        const state = useState();\r\n        listeners.forEach((listener) => listener(state));\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction subscribe(listener) {\r\n    listeners.push(listener);\r\n    if (subscribed === false) {\r\n        subscribed = true;\r\n        const store = useStore();\r\n        store.subscribe(updating);\r\n    }\r\n    return function unsubscribe() {\r\n        const index = listeners.indexOf(listener);\r\n        if (index !== -1) {\r\n            listeners.splice(index, 1);\r\n        }\r\n    };\r\n}\r\nexport default {\r\n    subscribe,\r\n};\r\n//# sourceMappingURL=batchUpdate.js.map","references":["/Users/fluff/Documents/zjx0905/redux-miniprogram/src/api/hooks.ts","/Users/fluff/Documents/zjx0905/redux-miniprogram/src/connect/createCommit.ts"],"map":"{\"version\":3,\"file\":\"batchUpdate.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/connect/batchUpdate.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AAClD,OAAO,YAAY,MAAM,gBAAgB,CAAC;AAE1C,MAAM,MAAM,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;AACrC,MAAM,SAAS,GAAmC,EAAE,CAAC;AACrD,IAAI,UAAU,GAAG,KAAK,CAAC;AAEvB,SAAS,QAAQ;IACf,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE;QACd,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QAEzB,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC;AACL,CAAC;AAED,wDAAwD;AACxD,SAAS,SAAS,CAAC,QAAoC;IACrD,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAEzB,IAAI,UAAU,KAAK,KAAK,EAAE;QACxB,UAAU,GAAG,IAAI,CAAC;QAElB,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;KAC3B;IAED,OAAO,SAAS,WAAW;QACzB,MAAM,KAAK,GAAG,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAChB,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SAC5B;IACH,CAAC,CAAC;AACJ,CAAC;AAED,eAAe;IACb,SAAS;CACV,CAAC\"}","dts":{"name":"/Users/fluff/Documents/zjx0905/redux-miniprogram/types/connect/batchUpdate.d.ts","writeByteOrderMark":false,"text":"declare function subscribe(listener: (state: AnyObject) => void): Function;\r\ndeclare const _default: {\r\n    subscribe: typeof subscribe;\r\n};\r\nexport default _default;\r\n"}}
