{"code":"import assert from './assert';\r\nfunction is(x, y) {\r\n    if (x === y) {\r\n        return x !== 0 || y !== 0 || 1 / x === 1 / y;\r\n    }\r\n    else {\r\n        return x !== x && y !== y;\r\n    }\r\n}\r\nexport default function diff(oldValue, newValue, target = {}, path = ['store']) {\r\n    assert(path.length <= 5, '数据层级不能超过 5 层');\r\n    Object.keys(newValue).forEach((key) => {\r\n        const oldKeyValue = oldValue[key];\r\n        const newKeyValue = newValue[key];\r\n        const currentPath = [...path, `['${key}']`];\r\n        if (is(oldKeyValue, newKeyValue)) {\r\n            return;\r\n        }\r\n        if (typeof oldKeyValue !== 'object' ||\r\n            oldKeyValue === null ||\r\n            typeof newKeyValue !== 'object' ||\r\n            newKeyValue === null) {\r\n            target[currentPath.join('')] = newKeyValue;\r\n            return;\r\n        }\r\n        if (Object.keys(oldKeyValue).length !== Object.keys(newKeyValue).length) {\r\n            target[currentPath.join('')] = newKeyValue;\r\n            return;\r\n        }\r\n        diff(oldKeyValue, newKeyValue, target, currentPath);\r\n    });\r\n    return target;\r\n}\r\n//# sourceMappingURL=diff.js.map","references":["/Users/fluff/Documents/zjx0905/redux-miniprogram/src/utils/assert.ts"],"map":"{\"version\":3,\"file\":\"diff.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/utils/diff.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,MAAM,MAAM,UAAU,CAAC;AAE9B,SAAS,EAAE,CAAC,CAAU,EAAE,CAAU;IAChC,IAAI,CAAC,KAAK,CAAC,EAAE;QACX,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC9C;SAAM;QACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC3B;AACH,CAAC;AAED,MAAM,CAAC,OAAO,UAAU,IAAI,CAC1B,QAAmB,EACnB,QAAmB,EACnB,SAAoB,EAAE,EACtB,OAAiB,CAAC,OAAO,CAAC;IAE1B,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE,cAAc,CAAC,CAAC;IAEzC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,GAAW,EAAE,EAAE;QAC5C,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,WAAW,GAAG,CAAC,GAAG,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;QAE5C,IAAI,EAAE,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE;YAChC,OAAO;SACR;QAED,IACE,OAAO,WAAW,KAAK,QAAQ;YAC/B,WAAW,KAAK,IAAI;YACpB,OAAO,WAAW,KAAK,QAAQ;YAC/B,WAAW,KAAK,IAAI,EACpB;YACA,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC;YAC3C,OAAO;SACR;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,EAAE;YACvE,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC;YAC3C,OAAO;SACR;QAED,IAAI,CAAC,WAAW,EAAE,WAAW,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC;IAEH,OAAO,MAAM,CAAC;AAChB,CAAC\"}","dts":{"name":"/Users/fluff/Documents/zjx0905/redux-miniprogram/types/utils/diff.d.ts","writeByteOrderMark":false,"text":"export default function diff(oldValue: AnyObject, newValue: AnyObject, target?: AnyObject, path?: string[]): AnyObject;\r\n"}}
